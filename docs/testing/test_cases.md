# MyBlog 测试用例文档

## 1. 单元测试用例

### 1.1 Markdown解析测试
| 用例ID | 测试项目 | 优先级 | 前置条件 | 测试步骤 | 预期结果 |
|--------|----------|---------|-----------|-----------|-----------|
| UT001 | Markdown基础语法解析 | P0 | 无 | 1. 测试基础Markdown语法<br>2. 验证HTML输出<br>3. 检查安全过滤 | 1. 正确解析Markdown<br>2. 生成有效HTML<br>3. 过滤危险标签 |
| UT002 | 代码块高亮 | P1 | 无 | 1. 测试不同语言代码块<br>2. 验证高亮效果<br>3. 检查样式应用 | 1. 正确识别语言<br>2. 语法高亮正确<br>3. 样式应用正确 |
| UT003 | 目录生成 | P0 | 无 | 1. 测试多级标题<br>2. 验证目录结构<br>3. 检查锚点链接 | 1. 正确提取标题<br>2. 生成层级结构<br>3. 锚点链接正确 |

### 1.2 文章服务测试
| 用例ID | 测试项目 | 优先级 | 前置条件 | 测试步骤 | 预期结果 |
|--------|----------|---------|-----------|-----------|-----------|
| UT004 | 文章创建 | P0 | 数据库已初始化 | 1. 创建带Markdown的文章<br>2. 验证HTML内容生成<br>3. 检查目录生成 | 1. 文章创建成功<br>2. HTML内容正确<br>3. 目录结构正确 |
| UT005 | 文章更新 | P0 | 已有文章数据 | 1. 更新文章内容<br>2. 验证HTML更新<br>3. 检查目录更新 | 1. 内容更新成功<br>2. HTML同步更新<br>3. 目录同步更新 |

### 1.3 评论服务测试
| 用例ID | 测试项目 | 优先级 | 前置条件 | 测试步骤 | 预期结果 |
|--------|----------|---------|-----------|-----------|-----------|
| UT006 | 评论创建 | P0 | 数据库已初始化 | 1. 创建带Markdown的评论<br>2. 验证HTML内容生成<br>3. 检查安全过滤 | 1. 评论创建成功<br>2. HTML内容正确<br>3. 内容安全过滤 |
| UT007 | 评论更新 | P1 | 已有评论数据 | 1. 更新评论内容<br>2. 验证HTML更新<br>3. 检查内容过滤 | 1. 内容更新成功<br>2. HTML同步更新<br>3. 过滤规则生效 |

## 2. 功能测试用例

### 2.1 文章管理测试
| 用例ID | 测试项目 | 优先级 | 前置条件 | 测试步骤 | 预期结果 |
|--------|----------|---------|-----------|-----------|-----------|
| FT001 | 文章编辑器 | P0 | 用户已登录 | 1. 使用Markdown编辑器<br>2. 测试实时预览<br>3. 验证保存功能 | 1. 编辑器正常工作<br>2. 预览实时更新<br>3. 保存功能正常 |
| FT002 | 目录导航 | P0 | 已有文章数据 | 1. 查看文章目录<br>2. 测试目录跳转<br>3. 验证高亮效果 | 1. 目录结构正确<br>2. 跳转准确定位<br>3. 高亮同步更新 |

### 2.2 评论功能测试
| 用例ID | 测试项目 | 优先级 | 前置条件 | 测试步骤 | 预期结果 |
|--------|----------|---------|-----------|-----------|-----------|
| FT003 | 评论编辑器 | P0 | 文章已发布 | 1. 使用Markdown编辑器<br>2. 测试预览功能<br>3. 提交评论 | 1. 编辑器正常工作<br>2. 预览功能正常<br>3. 提交成功 |
| FT004 | 评论显示 | P0 | 已有评论数据 | 1. 查看评论内容<br>2. 验证格式渲染<br>3. 测试回复功能 | 1. 内容正确显示<br>2. 格式正确渲染<br>3. 回复功能正常 |

## 3. 性能测试用例

### 3.1 Markdown解析性能
| 用例ID | 测试项目 | 优先级 | 前置条件 | 测试步骤 | 预期结果 |
|--------|----------|---------|-----------|-----------|-----------|
| PT001 | 大文档解析 | P0 | 无 | 1. 准备大型Markdown文档<br>2. 测试解析时间<br>3. 监控资源占用 | 1. 解析时间<1秒<br>2. 内存使用合理<br>3. CPU使用正常 |
| PT002 | 目录生成性能 | P1 | 无 | 1. 测试多级标题文档<br>2. 验证目录生成时间<br>3. 检查性能影响 | 1. 生成时间<0.1秒<br>2. 性能影响小<br>3. 资源占用低 |

### 3.2 页面加载性能
| 用例ID | 测试项目 | 优先级 | 前置条件 | 测试步骤 | 预期结果 |
|--------|----------|---------|-----------|-----------|-----------|
| PT003 | 文章页面加载 | P0 | 已有文章数据 | 1. 加载文章页面<br>2. 测试目录渲染<br>3. 验证滚动性能 | 1. 页面加载<3秒<br>2. 目录渲染流畅<br>3. 滚动无卡顿 |
| PT004 | 评论加载性能 | P1 | 大量评论数据 | 1. 加载评论列表<br>2. 测试评论渲染<br>3. 验证分页性能 | 1. 评论加载<1秒<br>2. 渲染流畅<br>3. 分页响应快 |

## 4. 安全测试用例

### 4.1 XSS防护测试
| 用例ID | 测试项目 | 优先级 | 前置条件 | 测试步骤 | 预期结果 |
|--------|----------|---------|-----------|-----------|-----------|
| ST001 | Markdown XSS防护 | P0 | 无 | 1. 注入恶意脚本<br>2. 测试HTML过滤<br>3. 验证输出转义 | 1. 脚本被过滤<br>2. HTML正确过滤<br>3. 内容安全显示 |
| ST002 | 评论XSS防护 | P0 | 无 | 1. 提交恶意评论<br>2. 测试内容过滤<br>3. 验证显示安全 | 1. 恶意内容被过滤<br>2. 过滤规则生效<br>3. 显示安全 |

## 5. 测试执行

### 5.1 测试环境准备
1. 安装测试依赖
   ```bash
   pip install -r requirements-dev.txt
   ```

2. 准备测试数据
   - 创建测试数据库
   - 导入测试数据集
   - 配置测试环境变量

### 5.2 执行测试
1. 运行单元测试
   ```bash
   pytest tests/unit/
   ```

2. 运行功能测试
   ```bash
   pytest tests/functional/
   ```

3. 运行性能测试
   ```bash
   pytest tests/performance/
   ```

### 5.3 测试报告
1. 生成覆盖率报告
   ```bash
   pytest --cov=app tests/
   ```

2. 生成HTML测试报告
   ```bash
   pytest --html=report.html tests/
   ```

## 6. 测试管理

### 6.1 测试状态标记
- ✅ 通过
- ❌ 失败
- ⏳ 待执行
- 🔄 重测
- ⚠️ 阻塞

### 6.2 问题严重程度
- P0: 严重问题，阻塞发布
- P1: 重要问题，需要修复
- P2: 普通问题，建议修复
- P3: 轻微问题，可以忽略

### 6.3 执行记录模板
```markdown
测试用例ID: [ID]
执行日期: [YYYY-MM-DD]
执行人: [姓名]
执行状态: [状态标记]
问题等级: [如有问题则标记]
问题描述: [如有问题则描述]
解决方案: [如有问题则填写]
重测结果: [如进行重测则填写]
``` 