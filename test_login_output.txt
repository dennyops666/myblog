============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.0.2, pluggy-1.5.0 -- /data/myblog/venv/bin/python
cachedir: .pytest_cache
rootdir: /data/myblog
plugins: cov-4.1.0, flask-1.3.0
collecting ... collected 1 item

tests/functional/test_auth.py::test_login ERROR                          [100%]

==================================== ERRORS ====================================
_________________________ ERROR at setup of test_login _________________________

    @pytest.fixture(scope='session')
    def app():
        """创建测试应用实例"""
        # 创建测试应用
>       app = create_app('testing')

tests/conftest.py:37: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
app/__init__.py:64: in create_app
    register_blueprints(app)
app/__init__.py:33: in register_blueprints
    from app.views import auth, dashboard, admin
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

    """
    文件名：auth.py
    描述：认证视图
    作者：denny
    """
    
    from flask import (
        Blueprint, render_template, request, url_for, redirect,
        flash, session, current_app, abort, jsonify, make_response
    )
    from flask_login import (
        login_user, logout_user, login_required,
        current_user
    )
    from app.forms.auth import LoginForm, RegisterForm, PasswordResetRequestForm, PasswordResetForm, PasswordChangeForm
    from app.models.user import User
    from app.models.role import Role
    from app.extensions import db
    from datetime import datetime, timedelta, UTC
    from werkzeug.security import check_password_hash
    from sqlalchemy import text
    from app.utils.security import verify_token
>   from werkzeug.urls import url_parse
E   ImportError: cannot import name 'url_parse' from 'werkzeug.urls' (/data/myblog/venv/lib/python3.12/site-packages/werkzeug/urls.py)

app/views/auth.py:24: ImportError
---------------------------- Captured stdout setup -----------------------------
2025-03-14 22:12:38,487 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-03-14 22:12:38,487 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("user_roles")
2025-03-14 22:12:38,487 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,487 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("user_roles")
2025-03-14 22:12:38,487 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,488 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("roles")
2025-03-14 22:12:38,488 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,488 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("roles")
2025-03-14 22:12:38,488 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,488 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2025-03-14 22:12:38,488 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,489 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("users")
2025-03-14 22:12:38,489 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,489 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("comments")
2025-03-14 22:12:38,489 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,489 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("comments")
2025-03-14 22:12:38,489 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,489 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("post_tags")
2025-03-14 22:12:38,489 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,489 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("post_tags")
2025-03-14 22:12:38,489 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,490 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("posts")
2025-03-14 22:12:38,490 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,490 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("posts")
2025-03-14 22:12:38,490 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,490 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("categories")
2025-03-14 22:12:38,490 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,490 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("categories")
2025-03-14 22:12:38,490 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,490 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("tags")
2025-03-14 22:12:38,490 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,490 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("tags")
2025-03-14 22:12:38,490 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,491 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("operation_logs")
2025-03-14 22:12:38,491 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,491 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("operation_logs")
2025-03-14 22:12:38,491 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,491 INFO sqlalchemy.engine.Engine COMMIT
2025-03-14 22:12:38,492 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-03-14 22:12:38,492 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("user_roles")
2025-03-14 22:12:38,492 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,492 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("user_roles")
2025-03-14 22:12:38,492 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,492 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("roles")
2025-03-14 22:12:38,493 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,493 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("roles")
2025-03-14 22:12:38,493 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,493 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2025-03-14 22:12:38,493 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,493 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("users")
2025-03-14 22:12:38,493 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,493 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("comments")
2025-03-14 22:12:38,493 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,493 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("comments")
2025-03-14 22:12:38,493 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,493 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("post_tags")
2025-03-14 22:12:38,494 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,494 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("post_tags")
2025-03-14 22:12:38,494 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,569 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("posts")
2025-03-14 22:12:38,569 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,569 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("posts")
2025-03-14 22:12:38,569 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,569 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("categories")
2025-03-14 22:12:38,569 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,569 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("categories")
2025-03-14 22:12:38,569 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,569 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("tags")
2025-03-14 22:12:38,569 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,570 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("tags")
2025-03-14 22:12:38,570 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,570 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("operation_logs")
2025-03-14 22:12:38,570 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,570 INFO sqlalchemy.engine.Engine PRAGMA temp.table_info("operation_logs")
2025-03-14 22:12:38,570 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,570 INFO sqlalchemy.engine.Engine 
CREATE TABLE roles (
	id INTEGER NOT NULL, 
	name VARCHAR(64) NOT NULL, 
	description VARCHAR(256), 
	permissions INTEGER NOT NULL, 
	is_default BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_role_name UNIQUE (name)
)


2025-03-14 22:12:38,571 INFO sqlalchemy.engine.Engine [no key 0.00024s] ()
2025-03-14 22:12:38,571 INFO sqlalchemy.engine.Engine CREATE INDEX idx_role_name ON roles (name)
2025-03-14 22:12:38,571 INFO sqlalchemy.engine.Engine [no key 0.00010s] ()
2025-03-14 22:12:38,572 INFO sqlalchemy.engine.Engine CREATE UNIQUE INDEX ix_roles_name ON roles (name)
2025-03-14 22:12:38,572 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
2025-03-14 22:12:38,572 INFO sqlalchemy.engine.Engine 
CREATE TABLE users (
	id INTEGER NOT NULL, 
	username VARCHAR(64) NOT NULL, 
	email VARCHAR(120) NOT NULL, 
	password VARCHAR(128) NOT NULL, 
	nickname VARCHAR(64), 
	avatar VARCHAR(200), 
	bio TEXT, 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_user_username UNIQUE (username), 
	CONSTRAINT uq_user_email UNIQUE (email)
)


2025-03-14 22:12:38,572 INFO sqlalchemy.engine.Engine [no key 0.00016s] ()
2025-03-14 22:12:38,573 INFO sqlalchemy.engine.Engine CREATE UNIQUE INDEX ix_users_email ON users (email)
2025-03-14 22:12:38,573 INFO sqlalchemy.engine.Engine [no key 0.00008s] ()
2025-03-14 22:12:38,573 INFO sqlalchemy.engine.Engine CREATE INDEX idx_user_email ON users (email)
2025-03-14 22:12:38,573 INFO sqlalchemy.engine.Engine [no key 0.00008s] ()
2025-03-14 22:12:38,573 INFO sqlalchemy.engine.Engine CREATE INDEX idx_user_username ON users (username)
2025-03-14 22:12:38,573 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
2025-03-14 22:12:38,574 INFO sqlalchemy.engine.Engine CREATE UNIQUE INDEX ix_users_username ON users (username)
2025-03-14 22:12:38,574 INFO sqlalchemy.engine.Engine [no key 0.00008s] ()
2025-03-14 22:12:38,574 INFO sqlalchemy.engine.Engine 
CREATE TABLE categories (
	id INTEGER NOT NULL, 
	name VARCHAR(64) NOT NULL, 
	slug VARCHAR(64), 
	description VARCHAR(256), 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (name), 
	UNIQUE (slug)
)


2025-03-14 22:12:38,574 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
2025-03-14 22:12:38,575 INFO sqlalchemy.engine.Engine 
CREATE TABLE tags (
	id INTEGER NOT NULL, 
	name VARCHAR(64) NOT NULL, 
	slug VARCHAR(64) NOT NULL, 
	description VARCHAR(256), 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	CONSTRAINT chk_tag_not_empty CHECK (name != '' AND slug != ''), 
	UNIQUE (name), 
	UNIQUE (slug)
)


2025-03-14 22:12:38,575 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
2025-03-14 22:12:38,575 INFO sqlalchemy.engine.Engine CREATE INDEX idx_tag_slug ON tags (slug)
2025-03-14 22:12:38,575 INFO sqlalchemy.engine.Engine [no key 0.00008s] ()
2025-03-14 22:12:38,575 INFO sqlalchemy.engine.Engine CREATE INDEX idx_tag_name ON tags (name)
2025-03-14 22:12:38,575 INFO sqlalchemy.engine.Engine [no key 0.00011s] ()
2025-03-14 22:12:38,576 INFO sqlalchemy.engine.Engine 
CREATE TABLE user_roles (
	user_id INTEGER, 
	role_id INTEGER, 
	created_at DATETIME NOT NULL, 
	CONSTRAINT uq_user_roles_user_role UNIQUE (user_id, role_id), 
	CONSTRAINT fk_user_roles_user_id FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, 
	CONSTRAINT fk_user_roles_role_id FOREIGN KEY(role_id) REFERENCES roles (id) ON DELETE CASCADE
)


2025-03-14 22:12:38,576 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
2025-03-14 22:12:38,576 INFO sqlalchemy.engine.Engine CREATE INDEX idx_user_roles_user_id ON user_roles (user_id)
2025-03-14 22:12:38,576 INFO sqlalchemy.engine.Engine [no key 0.00008s] ()
2025-03-14 22:12:38,576 INFO sqlalchemy.engine.Engine CREATE INDEX idx_user_roles_role_id ON user_roles (role_id)
2025-03-14 22:12:38,576 INFO sqlalchemy.engine.Engine [no key 0.00007s] ()
2025-03-14 22:12:38,577 INFO sqlalchemy.engine.Engine 
CREATE TABLE posts (
	id INTEGER NOT NULL, 
	title VARCHAR(255) NOT NULL, 
	content TEXT NOT NULL, 
	html_content TEXT, 
	toc TEXT, 
	highlight_css TEXT, 
	summary VARCHAR(500), 
	category_id INTEGER, 
	author_id INTEGER NOT NULL, 
	status VARCHAR(9), 
	is_sticky BOOLEAN, 
	view_count INTEGER, 
	comments_count INTEGER, 
	created_at DATETIME, 
	updated_at DATETIME, 
	is_private BOOLEAN, 
	published BOOLEAN, 
	can_comment BOOLEAN, 
	PRIMARY KEY (id), 
	UNIQUE (title), 
	FOREIGN KEY(category_id) REFERENCES categories (id), 
	FOREIGN KEY(author_id) REFERENCES users (id)
)


2025-03-14 22:12:38,577 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
2025-03-14 22:12:38,577 INFO sqlalchemy.engine.Engine 
CREATE TABLE operation_logs (
	id INTEGER NOT NULL, 
	user_id INTEGER NOT NULL, 
	action VARCHAR(50) NOT NULL, 
	target_type VARCHAR(50), 
	target_id INTEGER, 
	details TEXT, 
	result VARCHAR(20), 
	ip_address VARCHAR(50), 
	created_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE
)


2025-03-14 22:12:38,577 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
2025-03-14 22:12:38,578 INFO sqlalchemy.engine.Engine 
CREATE TABLE comments (
	id INTEGER NOT NULL, 
	content TEXT NOT NULL, 
	html_content TEXT, 
	post_id INTEGER NOT NULL, 
	parent_id INTEGER, 
	author_id INTEGER, 
	nickname VARCHAR(50), 
	email VARCHAR(120), 
	status INTEGER, 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(post_id) REFERENCES posts (id), 
	FOREIGN KEY(parent_id) REFERENCES comments (id), 
	FOREIGN KEY(author_id) REFERENCES users (id)
)


2025-03-14 22:12:38,578 INFO sqlalchemy.engine.Engine [no key 0.00014s] ()
2025-03-14 22:12:38,578 INFO sqlalchemy.engine.Engine 
CREATE TABLE post_tags (
	post_id INTEGER NOT NULL, 
	tag_id INTEGER NOT NULL, 
	PRIMARY KEY (post_id, tag_id), 
	CONSTRAINT uq_post_tag UNIQUE (post_id, tag_id), 
	CONSTRAINT chk_post_tag_not_null CHECK (post_id IS NOT NULL AND tag_id IS NOT NULL), 
	FOREIGN KEY(post_id) REFERENCES posts (id) ON DELETE CASCADE, 
	FOREIGN KEY(tag_id) REFERENCES tags (id) ON DELETE CASCADE
)


2025-03-14 22:12:38,578 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
2025-03-14 22:12:38,579 INFO sqlalchemy.engine.Engine COMMIT
2025-03-14 22:12:38,579 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-03-14 22:12:38,579 INFO sqlalchemy.engine.Engine SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite~_%' ESCAPE '~' ORDER BY name
2025-03-14 22:12:38,579 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-03-14 22:12:38,579 INFO sqlalchemy.engine.Engine ROLLBACK
2025-03-14 22:12:38,580 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-03-14 22:12:38,580 INFO sqlalchemy.engine.Engine SELECT 1
2025-03-14 22:12:38,580 INFO sqlalchemy.engine.Engine [generated in 0.00020s] ()
2025-03-14 22:12:38,580 INFO sqlalchemy.engine.Engine COMMIT
2025-03-14 22:12:38,599 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-03-14 22:12:38,600 INFO sqlalchemy.engine.Engine DELETE FROM roles
2025-03-14 22:12:38,600 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ()
2025-03-14 22:12:38,601 INFO sqlalchemy.engine.Engine COMMIT
2025-03-14 22:12:38,601 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-03-14 22:12:38,603 INFO sqlalchemy.engine.Engine INSERT INTO roles (name, description, permissions, is_default, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?)
2025-03-14 22:12:38,603 INFO sqlalchemy.engine.Engine [generated in 0.00018s] ('super_admin', '超级管理员', 63, 0, '2025-03-14 14:12:38.601364', '2025-03-14 14:12:38.601364')
2025-03-14 22:12:38,603 INFO sqlalchemy.engine.Engine INSERT INTO roles (name, description, permissions, is_default, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?)
2025-03-14 22:12:38,604 INFO sqlalchemy.engine.Engine [cached since 0.001057s ago] ('admin', '管理员', 31, 0, '2025-03-14 14:12:38.603708', '2025-03-14 14:12:38.603708')
2025-03-14 22:12:38,604 INFO sqlalchemy.engine.Engine INSERT INTO roles (name, description, permissions, is_default, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?)
2025-03-14 22:12:38,604 INFO sqlalchemy.engine.Engine [cached since 0.001588s ago] ('editor', '编辑者', 7, 0, '2025-03-14 14:12:38.604320', '2025-03-14 14:12:38.604320')
2025-03-14 22:12:38,605 INFO sqlalchemy.engine.Engine INSERT INTO roles (name, description, permissions, is_default, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?)
2025-03-14 22:12:38,605 INFO sqlalchemy.engine.Engine [cached since 0.002107s ago] ('user', '普通用户', 3, 1, '2025-03-14 14:12:38.604824', '2025-03-14 14:12:38.604824')
2025-03-14 22:12:38,605 INFO sqlalchemy.engine.Engine COMMIT
2025-03-14 22:12:38,605 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-03-14 22:12:38,607 INFO sqlalchemy.engine.Engine SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.permissions AS roles_permissions, roles.is_default AS roles_is_default, roles.created_at AS roles_created_at, roles.updated_at AS roles_updated_at 
FROM roles
2025-03-14 22:12:38,607 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ()
2025-03-14 22:12:38,608 INFO sqlalchemy.engine.Engine SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.permissions AS roles_permissions, roles.is_default AS roles_is_default, roles.created_at AS roles_created_at, roles.updated_at AS roles_updated_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-03-14 22:12:38,608 INFO sqlalchemy.engine.Engine [generated in 0.00015s] ('super_admin', 1, 0)
2025-03-14 22:12:38,609 INFO sqlalchemy.engine.Engine SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.permissions AS roles_permissions, roles.is_default AS roles_is_default, roles.created_at AS roles_created_at, roles.updated_at AS roles_updated_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-03-14 22:12:38,609 INFO sqlalchemy.engine.Engine [cached since 0.0007894s ago] ('admin', 1, 0)
2025-03-14 22:12:38,609 INFO sqlalchemy.engine.Engine SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.permissions AS roles_permissions, roles.is_default AS roles_is_default, roles.created_at AS roles_created_at, roles.updated_at AS roles_updated_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-03-14 22:12:38,609 INFO sqlalchemy.engine.Engine [cached since 0.001226s ago] ('editor', 1, 0)
2025-03-14 22:12:38,610 INFO sqlalchemy.engine.Engine SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.permissions AS roles_permissions, roles.is_default AS roles_is_default, roles.created_at AS roles_created_at, roles.updated_at AS roles_updated_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-03-14 22:12:38,610 INFO sqlalchemy.engine.Engine [cached since 0.001651s ago] ('user', 1, 0)
2025-03-14 22:12:38,610 INFO sqlalchemy.engine.Engine COMMIT
---------------------------- Captured stderr setup -----------------------------
2025-03-14 22:12:38,485 - app - INFO - 扩展初始化完成
2025-03-14 22:12:38,486 - app - ERROR - 删除旧数据库失败: [Errno 1] Operation not permitted: '/tmp'
2025-03-14 22:12:38,487 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-14 22:12:38,487 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("user_roles")
2025-03-14 22:12:38,487 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,487 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("user_roles")
2025-03-14 22:12:38,487 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,488 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("roles")
2025-03-14 22:12:38,488 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,488 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("roles")
2025-03-14 22:12:38,488 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,488 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-14 22:12:38,488 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,489 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2025-03-14 22:12:38,489 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,489 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("comments")
2025-03-14 22:12:38,489 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,489 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("comments")
2025-03-14 22:12:38,489 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,489 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("post_tags")
2025-03-14 22:12:38,489 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,489 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("post_tags")
2025-03-14 22:12:38,489 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,490 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("posts")
2025-03-14 22:12:38,490 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,490 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("posts")
2025-03-14 22:12:38,490 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,490 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("categories")
2025-03-14 22:12:38,490 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,490 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("categories")
2025-03-14 22:12:38,490 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,490 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("tags")
2025-03-14 22:12:38,490 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,490 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("tags")
2025-03-14 22:12:38,490 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,491 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("operation_logs")
2025-03-14 22:12:38,491 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,491 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("operation_logs")
2025-03-14 22:12:38,491 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,491 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-14 22:12:38,492 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-14 22:12:38,492 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("user_roles")
2025-03-14 22:12:38,492 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,492 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("user_roles")
2025-03-14 22:12:38,492 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,492 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("roles")
2025-03-14 22:12:38,493 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,493 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("roles")
2025-03-14 22:12:38,493 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,493 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-14 22:12:38,493 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,493 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2025-03-14 22:12:38,493 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,493 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("comments")
2025-03-14 22:12:38,493 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,493 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("comments")
2025-03-14 22:12:38,493 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,493 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("post_tags")
2025-03-14 22:12:38,494 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,494 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("post_tags")
2025-03-14 22:12:38,494 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,569 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("posts")
2025-03-14 22:12:38,569 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,569 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("posts")
2025-03-14 22:12:38,569 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,569 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("categories")
2025-03-14 22:12:38,569 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,569 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("categories")
2025-03-14 22:12:38,569 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,569 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("tags")
2025-03-14 22:12:38,569 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,570 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("tags")
2025-03-14 22:12:38,570 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,570 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("operation_logs")
2025-03-14 22:12:38,570 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,570 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("operation_logs")
2025-03-14 22:12:38,570 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,570 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE roles (
	id INTEGER NOT NULL, 
	name VARCHAR(64) NOT NULL, 
	description VARCHAR(256), 
	permissions INTEGER NOT NULL, 
	is_default BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_role_name UNIQUE (name)
)


2025-03-14 22:12:38,571 - sqlalchemy.engine.Engine - INFO - [no key 0.00024s] ()
2025-03-14 22:12:38,571 - sqlalchemy.engine.Engine - INFO - CREATE INDEX idx_role_name ON roles (name)
2025-03-14 22:12:38,571 - sqlalchemy.engine.Engine - INFO - [no key 0.00010s] ()
2025-03-14 22:12:38,572 - sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_roles_name ON roles (name)
2025-03-14 22:12:38,572 - sqlalchemy.engine.Engine - INFO - [no key 0.00009s] ()
2025-03-14 22:12:38,572 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	id INTEGER NOT NULL, 
	username VARCHAR(64) NOT NULL, 
	email VARCHAR(120) NOT NULL, 
	password VARCHAR(128) NOT NULL, 
	nickname VARCHAR(64), 
	avatar VARCHAR(200), 
	bio TEXT, 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_user_username UNIQUE (username), 
	CONSTRAINT uq_user_email UNIQUE (email)
)


2025-03-14 22:12:38,572 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] ()
2025-03-14 22:12:38,573 - sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_users_email ON users (email)
2025-03-14 22:12:38,573 - sqlalchemy.engine.Engine - INFO - [no key 0.00008s] ()
2025-03-14 22:12:38,573 - sqlalchemy.engine.Engine - INFO - CREATE INDEX idx_user_email ON users (email)
2025-03-14 22:12:38,573 - sqlalchemy.engine.Engine - INFO - [no key 0.00008s] ()
2025-03-14 22:12:38,573 - sqlalchemy.engine.Engine - INFO - CREATE INDEX idx_user_username ON users (username)
2025-03-14 22:12:38,573 - sqlalchemy.engine.Engine - INFO - [no key 0.00009s] ()
2025-03-14 22:12:38,574 - sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_users_username ON users (username)
2025-03-14 22:12:38,574 - sqlalchemy.engine.Engine - INFO - [no key 0.00008s] ()
2025-03-14 22:12:38,574 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE categories (
	id INTEGER NOT NULL, 
	name VARCHAR(64) NOT NULL, 
	slug VARCHAR(64), 
	description VARCHAR(256), 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (name), 
	UNIQUE (slug)
)


2025-03-14 22:12:38,574 - sqlalchemy.engine.Engine - INFO - [no key 0.00009s] ()
2025-03-14 22:12:38,575 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE tags (
	id INTEGER NOT NULL, 
	name VARCHAR(64) NOT NULL, 
	slug VARCHAR(64) NOT NULL, 
	description VARCHAR(256), 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	CONSTRAINT chk_tag_not_empty CHECK (name != '' AND slug != ''), 
	UNIQUE (name), 
	UNIQUE (slug)
)


2025-03-14 22:12:38,575 - sqlalchemy.engine.Engine - INFO - [no key 0.00009s] ()
2025-03-14 22:12:38,575 - sqlalchemy.engine.Engine - INFO - CREATE INDEX idx_tag_slug ON tags (slug)
2025-03-14 22:12:38,575 - sqlalchemy.engine.Engine - INFO - [no key 0.00008s] ()
2025-03-14 22:12:38,575 - sqlalchemy.engine.Engine - INFO - CREATE INDEX idx_tag_name ON tags (name)
2025-03-14 22:12:38,575 - sqlalchemy.engine.Engine - INFO - [no key 0.00011s] ()
2025-03-14 22:12:38,576 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE user_roles (
	user_id INTEGER, 
	role_id INTEGER, 
	created_at DATETIME NOT NULL, 
	CONSTRAINT uq_user_roles_user_role UNIQUE (user_id, role_id), 
	CONSTRAINT fk_user_roles_user_id FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, 
	CONSTRAINT fk_user_roles_role_id FOREIGN KEY(role_id) REFERENCES roles (id) ON DELETE CASCADE
)


2025-03-14 22:12:38,576 - sqlalchemy.engine.Engine - INFO - [no key 0.00009s] ()
2025-03-14 22:12:38,576 - sqlalchemy.engine.Engine - INFO - CREATE INDEX idx_user_roles_user_id ON user_roles (user_id)
2025-03-14 22:12:38,576 - sqlalchemy.engine.Engine - INFO - [no key 0.00008s] ()
2025-03-14 22:12:38,576 - sqlalchemy.engine.Engine - INFO - CREATE INDEX idx_user_roles_role_id ON user_roles (role_id)
2025-03-14 22:12:38,576 - sqlalchemy.engine.Engine - INFO - [no key 0.00007s] ()
2025-03-14 22:12:38,577 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE posts (
	id INTEGER NOT NULL, 
	title VARCHAR(255) NOT NULL, 
	content TEXT NOT NULL, 
	html_content TEXT, 
	toc TEXT, 
	highlight_css TEXT, 
	summary VARCHAR(500), 
	category_id INTEGER, 
	author_id INTEGER NOT NULL, 
	status VARCHAR(9), 
	is_sticky BOOLEAN, 
	view_count INTEGER, 
	comments_count INTEGER, 
	created_at DATETIME, 
	updated_at DATETIME, 
	is_private BOOLEAN, 
	published BOOLEAN, 
	can_comment BOOLEAN, 
	PRIMARY KEY (id), 
	UNIQUE (title), 
	FOREIGN KEY(category_id) REFERENCES categories (id), 
	FOREIGN KEY(author_id) REFERENCES users (id)
)


2025-03-14 22:12:38,577 - sqlalchemy.engine.Engine - INFO - [no key 0.00009s] ()
2025-03-14 22:12:38,577 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE operation_logs (
	id INTEGER NOT NULL, 
	user_id INTEGER NOT NULL, 
	action VARCHAR(50) NOT NULL, 
	target_type VARCHAR(50), 
	target_id INTEGER, 
	details TEXT, 
	result VARCHAR(20), 
	ip_address VARCHAR(50), 
	created_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE
)


2025-03-14 22:12:38,577 - sqlalchemy.engine.Engine - INFO - [no key 0.00009s] ()
2025-03-14 22:12:38,578 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE comments (
	id INTEGER NOT NULL, 
	content TEXT NOT NULL, 
	html_content TEXT, 
	post_id INTEGER NOT NULL, 
	parent_id INTEGER, 
	author_id INTEGER, 
	nickname VARCHAR(50), 
	email VARCHAR(120), 
	status INTEGER, 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(post_id) REFERENCES posts (id), 
	FOREIGN KEY(parent_id) REFERENCES comments (id), 
	FOREIGN KEY(author_id) REFERENCES users (id)
)


2025-03-14 22:12:38,578 - sqlalchemy.engine.Engine - INFO - [no key 0.00014s] ()
2025-03-14 22:12:38,578 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE post_tags (
	post_id INTEGER NOT NULL, 
	tag_id INTEGER NOT NULL, 
	PRIMARY KEY (post_id, tag_id), 
	CONSTRAINT uq_post_tag UNIQUE (post_id, tag_id), 
	CONSTRAINT chk_post_tag_not_null CHECK (post_id IS NOT NULL AND tag_id IS NOT NULL), 
	FOREIGN KEY(post_id) REFERENCES posts (id) ON DELETE CASCADE, 
	FOREIGN KEY(tag_id) REFERENCES tags (id) ON DELETE CASCADE
)


2025-03-14 22:12:38,578 - sqlalchemy.engine.Engine - INFO - [no key 0.00009s] ()
2025-03-14 22:12:38,579 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-14 22:12:38,579 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-14 22:12:38,579 - sqlalchemy.engine.Engine - INFO - SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite~_%' ESCAPE '~' ORDER BY name
2025-03-14 22:12:38,579 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-14 22:12:38,579 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-14 22:12:38,580 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-14 22:12:38,580 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-03-14 22:12:38,580 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] ()
2025-03-14 22:12:38,580 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-14 22:12:38,580 - app - INFO - 数据库初始化成功
2025-03-14 22:12:38,580 - app - INFO - 所有必需的表已创建
2025-03-14 22:12:38,599 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-14 22:12:38,600 - sqlalchemy.engine.Engine - INFO - DELETE FROM roles
2025-03-14 22:12:38,600 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] ()
2025-03-14 22:12:38,601 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-14 22:12:38,601 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-14 22:12:38,603 - sqlalchemy.engine.Engine - INFO - INSERT INTO roles (name, description, permissions, is_default, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?)
2025-03-14 22:12:38,603 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ('super_admin', '超级管理员', 63, 0, '2025-03-14 14:12:38.601364', '2025-03-14 14:12:38.601364')
2025-03-14 22:12:38,603 - app - INFO - 创建新角色: super_admin, 权限: 63
2025-03-14 22:12:38,603 - sqlalchemy.engine.Engine - INFO - INSERT INTO roles (name, description, permissions, is_default, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?)
2025-03-14 22:12:38,604 - sqlalchemy.engine.Engine - INFO - [cached since 0.001057s ago] ('admin', '管理员', 31, 0, '2025-03-14 14:12:38.603708', '2025-03-14 14:12:38.603708')
2025-03-14 22:12:38,604 - app - INFO - 创建新角色: admin, 权限: 31
2025-03-14 22:12:38,604 - sqlalchemy.engine.Engine - INFO - INSERT INTO roles (name, description, permissions, is_default, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?)
2025-03-14 22:12:38,604 - sqlalchemy.engine.Engine - INFO - [cached since 0.001588s ago] ('editor', '编辑者', 7, 0, '2025-03-14 14:12:38.604320', '2025-03-14 14:12:38.604320')
2025-03-14 22:12:38,604 - app - INFO - 创建新角色: editor, 权限: 7
2025-03-14 22:12:38,605 - sqlalchemy.engine.Engine - INFO - INSERT INTO roles (name, description, permissions, is_default, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?)
2025-03-14 22:12:38,605 - sqlalchemy.engine.Engine - INFO - [cached since 0.002107s ago] ('user', '普通用户', 3, 1, '2025-03-14 14:12:38.604824', '2025-03-14 14:12:38.604824')
2025-03-14 22:12:38,605 - app - INFO - 创建新角色: user, 权限: 3
2025-03-14 22:12:38,605 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-14 22:12:38,605 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-14 22:12:38,607 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.permissions AS roles_permissions, roles.is_default AS roles_is_default, roles.created_at AS roles_created_at, roles.updated_at AS roles_updated_at 
FROM roles
2025-03-14 22:12:38,607 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] ()
2025-03-14 22:12:38,608 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.permissions AS roles_permissions, roles.is_default AS roles_is_default, roles.created_at AS roles_created_at, roles.updated_at AS roles_updated_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-03-14 22:12:38,608 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] ('super_admin', 1, 0)
2025-03-14 22:12:38,609 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.permissions AS roles_permissions, roles.is_default AS roles_is_default, roles.created_at AS roles_created_at, roles.updated_at AS roles_updated_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-03-14 22:12:38,609 - sqlalchemy.engine.Engine - INFO - [cached since 0.0007894s ago] ('admin', 1, 0)
2025-03-14 22:12:38,609 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.permissions AS roles_permissions, roles.is_default AS roles_is_default, roles.created_at AS roles_created_at, roles.updated_at AS roles_updated_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-03-14 22:12:38,609 - sqlalchemy.engine.Engine - INFO - [cached since 0.001226s ago] ('editor', 1, 0)
2025-03-14 22:12:38,610 - sqlalchemy.engine.Engine - INFO - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.permissions AS roles_permissions, roles.is_default AS roles_is_default, roles.created_at AS roles_created_at, roles.updated_at AS roles_updated_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
2025-03-14 22:12:38,610 - sqlalchemy.engine.Engine - INFO - [cached since 0.001651s ago] ('user', 1, 0)
2025-03-14 22:12:38,610 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-14 22:12:38,610 - app - INFO - 数据库初始化成功
------------------------------ Captured log setup ------------------------------
INFO     app:extensions.py:260 扩展初始化完成
ERROR    app:config.py:135 删除旧数据库失败: [Errno 1] Operation not permitted: '/tmp'
INFO     sqlalchemy.engine.Engine:base.py:2689 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA main.table_info("user_roles")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA temp.table_info("user_roles")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA main.table_info("roles")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA temp.table_info("roles")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA main.table_info("comments")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA temp.table_info("comments")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA main.table_info("post_tags")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA temp.table_info("post_tags")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA main.table_info("posts")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA temp.table_info("posts")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA main.table_info("categories")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA temp.table_info("categories")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA main.table_info("tags")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA temp.table_info("tags")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA main.table_info("operation_logs")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA temp.table_info("operation_logs")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2695 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2689 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA main.table_info("user_roles")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA temp.table_info("user_roles")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA main.table_info("roles")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA temp.table_info("roles")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA main.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA temp.table_info("users")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA main.table_info("comments")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA temp.table_info("comments")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA main.table_info("post_tags")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA temp.table_info("post_tags")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA main.table_info("posts")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA temp.table_info("posts")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA main.table_info("categories")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA temp.table_info("categories")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA main.table_info("tags")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA temp.table_info("tags")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA main.table_info("operation_logs")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 PRAGMA temp.table_info("operation_logs")
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 
CREATE TABLE roles (
	id INTEGER NOT NULL, 
	name VARCHAR(64) NOT NULL, 
	description VARCHAR(256), 
	permissions INTEGER NOT NULL, 
	is_default BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_role_name UNIQUE (name)
)


INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00024s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 CREATE INDEX idx_role_name ON roles (name)
INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00010s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 CREATE UNIQUE INDEX ix_roles_name ON roles (name)
INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 
CREATE TABLE users (
	id INTEGER NOT NULL, 
	username VARCHAR(64) NOT NULL, 
	email VARCHAR(120) NOT NULL, 
	password VARCHAR(128) NOT NULL, 
	nickname VARCHAR(64), 
	avatar VARCHAR(200), 
	bio TEXT, 
	is_active BOOLEAN NOT NULL, 
	created_at DATETIME NOT NULL, 
	updated_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	CONSTRAINT uq_user_username UNIQUE (username), 
	CONSTRAINT uq_user_email UNIQUE (email)
)


INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00016s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 CREATE UNIQUE INDEX ix_users_email ON users (email)
INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 CREATE INDEX idx_user_email ON users (email)
INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 CREATE INDEX idx_user_username ON users (username)
INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 CREATE UNIQUE INDEX ix_users_username ON users (username)
INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 
CREATE TABLE categories (
	id INTEGER NOT NULL, 
	name VARCHAR(64) NOT NULL, 
	slug VARCHAR(64), 
	description VARCHAR(256), 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (name), 
	UNIQUE (slug)
)


INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 
CREATE TABLE tags (
	id INTEGER NOT NULL, 
	name VARCHAR(64) NOT NULL, 
	slug VARCHAR(64) NOT NULL, 
	description VARCHAR(256), 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	CONSTRAINT chk_tag_not_empty CHECK (name != '' AND slug != ''), 
	UNIQUE (name), 
	UNIQUE (slug)
)


INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 CREATE INDEX idx_tag_slug ON tags (slug)
INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 CREATE INDEX idx_tag_name ON tags (name)
INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00011s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 
CREATE TABLE user_roles (
	user_id INTEGER, 
	role_id INTEGER, 
	created_at DATETIME NOT NULL, 
	CONSTRAINT uq_user_roles_user_role UNIQUE (user_id, role_id), 
	CONSTRAINT fk_user_roles_user_id FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, 
	CONSTRAINT fk_user_roles_role_id FOREIGN KEY(role_id) REFERENCES roles (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 CREATE INDEX idx_user_roles_user_id ON user_roles (user_id)
INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00008s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 CREATE INDEX idx_user_roles_role_id ON user_roles (role_id)
INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00007s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 
CREATE TABLE posts (
	id INTEGER NOT NULL, 
	title VARCHAR(255) NOT NULL, 
	content TEXT NOT NULL, 
	html_content TEXT, 
	toc TEXT, 
	highlight_css TEXT, 
	summary VARCHAR(500), 
	category_id INTEGER, 
	author_id INTEGER NOT NULL, 
	status VARCHAR(9), 
	is_sticky BOOLEAN, 
	view_count INTEGER, 
	comments_count INTEGER, 
	created_at DATETIME, 
	updated_at DATETIME, 
	is_private BOOLEAN, 
	published BOOLEAN, 
	can_comment BOOLEAN, 
	PRIMARY KEY (id), 
	UNIQUE (title), 
	FOREIGN KEY(category_id) REFERENCES categories (id), 
	FOREIGN KEY(author_id) REFERENCES users (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 
CREATE TABLE operation_logs (
	id INTEGER NOT NULL, 
	user_id INTEGER NOT NULL, 
	action VARCHAR(50) NOT NULL, 
	target_type VARCHAR(50), 
	target_id INTEGER, 
	details TEXT, 
	result VARCHAR(20), 
	ip_address VARCHAR(50), 
	created_at DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 
CREATE TABLE comments (
	id INTEGER NOT NULL, 
	content TEXT NOT NULL, 
	html_content TEXT, 
	post_id INTEGER NOT NULL, 
	parent_id INTEGER, 
	author_id INTEGER, 
	nickname VARCHAR(50), 
	email VARCHAR(120), 
	status INTEGER, 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(post_id) REFERENCES posts (id), 
	FOREIGN KEY(parent_id) REFERENCES comments (id), 
	FOREIGN KEY(author_id) REFERENCES users (id)
)


INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 
CREATE TABLE post_tags (
	post_id INTEGER NOT NULL, 
	tag_id INTEGER NOT NULL, 
	PRIMARY KEY (post_id, tag_id), 
	CONSTRAINT uq_post_tag UNIQUE (post_id, tag_id), 
	CONSTRAINT chk_post_tag_not_null CHECK (post_id IS NOT NULL AND tag_id IS NOT NULL), 
	FOREIGN KEY(post_id) REFERENCES posts (id) ON DELETE CASCADE, 
	FOREIGN KEY(tag_id) REFERENCES tags (id) ON DELETE CASCADE
)


INFO     sqlalchemy.engine.Engine:base.py:1848 [no key 0.00009s] ()
INFO     sqlalchemy.engine.Engine:base.py:2695 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2689 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1848 SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite~_%' ESCAPE '~' ORDER BY name
INFO     sqlalchemy.engine.Engine:base.py:1848 [raw sql] ()
INFO     sqlalchemy.engine.Engine:base.py:2692 ROLLBACK
INFO     sqlalchemy.engine.Engine:base.py:2689 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1848 SELECT 1
INFO     sqlalchemy.engine.Engine:base.py:1848 [generated in 0.00020s] ()
INFO     sqlalchemy.engine.Engine:base.py:2695 COMMIT
INFO     app:config.py:170 数据库初始化成功
INFO     app:config.py:171 所有必需的表已创建
INFO     sqlalchemy.engine.Engine:base.py:2689 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1848 DELETE FROM roles
INFO     sqlalchemy.engine.Engine:base.py:1848 [generated in 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:2695 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2689 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1848 INSERT INTO roles (name, description, permissions, is_default, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1848 [generated in 0.00018s] ('super_admin', '超级管理员', 63, 0, '2025-03-14 14:12:38.601364', '2025-03-14 14:12:38.601364')
INFO     app:config.py:223 创建新角色: super_admin, 权限: 63
INFO     sqlalchemy.engine.Engine:base.py:1848 INSERT INTO roles (name, description, permissions, is_default, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1848 [cached since 0.001057s ago] ('admin', '管理员', 31, 0, '2025-03-14 14:12:38.603708', '2025-03-14 14:12:38.603708')
INFO     app:config.py:223 创建新角色: admin, 权限: 31
INFO     sqlalchemy.engine.Engine:base.py:1848 INSERT INTO roles (name, description, permissions, is_default, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1848 [cached since 0.001588s ago] ('editor', '编辑者', 7, 0, '2025-03-14 14:12:38.604320', '2025-03-14 14:12:38.604320')
INFO     app:config.py:223 创建新角色: editor, 权限: 7
INFO     sqlalchemy.engine.Engine:base.py:1848 INSERT INTO roles (name, description, permissions, is_default, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?)
INFO     sqlalchemy.engine.Engine:base.py:1848 [cached since 0.002107s ago] ('user', '普通用户', 3, 1, '2025-03-14 14:12:38.604824', '2025-03-14 14:12:38.604824')
INFO     app:config.py:223 创建新角色: user, 权限: 3
INFO     sqlalchemy.engine.Engine:base.py:2695 COMMIT
INFO     sqlalchemy.engine.Engine:base.py:2689 BEGIN (implicit)
INFO     sqlalchemy.engine.Engine:base.py:1848 SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.permissions AS roles_permissions, roles.is_default AS roles_is_default, roles.created_at AS roles_created_at, roles.updated_at AS roles_updated_at 
FROM roles
INFO     sqlalchemy.engine.Engine:base.py:1848 [generated in 0.00014s] ()
INFO     sqlalchemy.engine.Engine:base.py:1848 SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.permissions AS roles_permissions, roles.is_default AS roles_is_default, roles.created_at AS roles_created_at, roles.updated_at AS roles_updated_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
INFO     sqlalchemy.engine.Engine:base.py:1848 [generated in 0.00015s] ('super_admin', 1, 0)
INFO     sqlalchemy.engine.Engine:base.py:1848 SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.permissions AS roles_permissions, roles.is_default AS roles_is_default, roles.created_at AS roles_created_at, roles.updated_at AS roles_updated_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
INFO     sqlalchemy.engine.Engine:base.py:1848 [cached since 0.0007894s ago] ('admin', 1, 0)
INFO     sqlalchemy.engine.Engine:base.py:1848 SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.permissions AS roles_permissions, roles.is_default AS roles_is_default, roles.created_at AS roles_created_at, roles.updated_at AS roles_updated_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
INFO     sqlalchemy.engine.Engine:base.py:1848 [cached since 0.001226s ago] ('editor', 1, 0)
INFO     sqlalchemy.engine.Engine:base.py:1848 SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description, roles.permissions AS roles_permissions, roles.is_default AS roles_is_default, roles.created_at AS roles_created_at, roles.updated_at AS roles_updated_at 
FROM roles 
WHERE roles.name = ?
 LIMIT ? OFFSET ?
INFO     sqlalchemy.engine.Engine:base.py:1848 [cached since 0.001651s ago] ('user', 1, 0)
INFO     sqlalchemy.engine.Engine:base.py:2695 COMMIT
INFO     app:config.py:248 数据库初始化成功
=============================== warnings summary ===============================
tests/functional/test_auth.py::test_login
  /data/myblog/venv/lib/python3.12/site-packages/flask_session/filesystem/filesystem.py:57: DeprecationWarning: 'SESSION_FILE_DIR' is deprecated and will be removed in a future release. Instead pass FileSystemCache(directory, threshold, mode) instance as SESSION_CACHELIB.
    warnings.warn(

tests/functional/test_auth.py::test_login
  /data/myblog/venv/lib/python3.12/site-packages/flask_session/filesystem/filesystem.py:75: DeprecationWarning: FileSystemSessionInterface is deprecated and will be removed in a future release. Instead use the CacheLib backend directly.
    warnings.warn(

tests/functional/test_auth.py::test_login
  /data/myblog/venv/lib/python3.12/site-packages/flask_session/base.py:172: DeprecationWarning: The 'use_signer' option is deprecated and will be removed in the next minor release. Please update your configuration accordingly or open an issue.
    warnings.warn(

tests/functional/test_auth.py::test_login
  /data/myblog/venv/lib/python3.12/site-packages/flask_caching/__init__.py:114: UserWarning: Flask-Caching: CACHE_TYPE is set to null, caching is effectively disabled.
    warnings.warn(

tests/functional/test_auth.py::test_login
  /data/myblog/venv/lib/python3.12/site-packages/flask_caching/__init__.py:153: DeprecationWarning: Using the initialization functions in flask_caching.backend is deprecated.  Use the a full path to backend classes directly.
    warnings.warn(

tests/functional/test_auth.py::test_login
  /data/myblog/venv/lib/python3.12/site-packages/flask_limiter/extension.py:330: UserWarning: Using the in-memory storage for tracking rate limits as no storage was explicitly specified. This is not recommended for production use. See: https://flask-limiter.readthedocs.io#configuring-a-storage-backend for documentation about configuring the storage backend.
    warnings.warn(

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
ERROR tests/functional/test_auth.py::test_login - ImportError: cannot import ...
========================= 6 warnings, 1 error in 0.32s =========================
